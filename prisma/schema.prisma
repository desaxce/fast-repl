generator client {
    provider             = "prisma-client-py"
    recursive_type_depth = 5
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum ReplStatus {
    RUNNING
    STOPPED
}

model Repl {
    uuid       String     @id @default(uuid()) @db.Uuid
    created_at DateTime   @default(now())
    max_uses   Int
    max_mem    Int
    header     String
    status     ReplStatus @default(RUNNING)
    proofs     Proof[]
}

model Proof {
    uuid        String  @id @default(uuid()) @db.Uuid
    id          String
    code        String
    diagnostics Json?   @db.JsonB
    response    Json?   @db.JsonB
    time        Float
    error       String?
    repl_uuid   String  @db.Uuid
    repl        Repl    @relation(fields: [repl_uuid], references: [uuid])
}
